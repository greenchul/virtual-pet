<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Virtual Pet</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Yuji+Mai&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Karla&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <h1>Virtual Pet &#129409;</h1>
    </header>
    <main>
      <section id="description">
        <div>
          <p>
            Enter the name of your virtual pet in the box below and click
            "Create pet"
          </p>
          <ul>
            <li>Pets can be aged using the "Grow up" button</li>
            <li>Pets can be walked using the "Walk" button</li>
            <li>Pets can fed using the "Feed" button</li>
            <li>
              Pets will die if they get too old or you dont look after them
            </li>
          </ul>
        </div>
      </section>
      <section id="create-pet">
        <div>
          <form>
            <label>Name: </label>
            <input type="text" id="name" />
          </form>
          <button id="create-pet-button">Create Pet</button>
        </div>
      </section>
      <section id="container">
        <section id="pet">
          <div id="pet-controlls">
            <div>
              <button id="grow-up-button">Grow up</button>
            </div>
            <div>
              <button id="feed-button">Feed</button>
            </div>
            <div>
              <button id="walk-button">Walk</button>
            </div>
          </div>
        </section>
        <section id="stats">
          <div>
            Age
            <progress id="age" max="30" value="0"></progress>
            <span id="age-number"></span><span>/30</span>
          </div>
          <div>
            Hunger
            <progress id="hunger" max="10" value="0"></progress>
            <span id="hunger-number"></span><span>/10</span>
          </div>
          <div>
            Fitness
            <progress id="fitness" max="10" value="0"></progress>
            <span id="fitness-number"></span><span>/10</span>
          </div>
          <div>Alive <span id="alive"></span></div>
        </section>
      </section>
    </main>
    <footer></footer>
    <script src="/src/pet.js"></script>

    <script>
      console.log("Virtual pet connected");

      let pet;

      const createPetButton = document.getElementById("create-pet-button");
      const petNameInput = document.getElementById("name");

      const petAge = document.getElementById("age");
      const petAgeNumber = document.getElementById("age-number");

      const petHunger = document.getElementById("hunger");
      const petHungerNumber = document.getElementById("hunger-number");

      const petFitness = document.getElementById("fitness");
      const petFitnessNumber = document.getElementById("fitness-number");

      const PetIsAlive = document.getElementById("alive");

      const growUpButton = document.getElementById("grow-up-button");
      const feedButton = document.getElementById("feed-button");
      const walkButton = document.getElementById("walk-button");

      const checkUp = () => {
        petAgeNumber.innerHTML = `${pet.age}`;
        petAge.value = pet.age;
        petHunger.value = pet.hunger;
        petHungerNumber.innerHTML = `${pet.hunger}`;
        petFitness.value = pet.fitness;
        petFitnessNumber.innerHTML = `${pet.fitness}`;
        if (pet.isAlive) {
          PetIsAlive.innerHTML = " &#9989 ";
        } else {
          PetIsAlive.innerHTML = " &#10060 ";
          growUpButton.disabled = true;
          walkButton.disabled = true;
          feedButton.disabled = true;
        }
      };

      // create new instance of Pet on button click
      createPetButton.addEventListener("click", () => {
        pet = new Pet(petNameInput.value);
        console.log("created new pet", pet);
        checkUp();
        growUpButton.disabled = false;
        walkButton.disabled = false;
        feedButton.disabled = false;
      });

      // grow up

      growUpButton.addEventListener("click", () => {
        pet.growUp();
        console.log(pet.isAlive);
        checkUp();
      });

      // feed
      feedButton.addEventListener("click", () => {
        pet.feed();
        checkUp();
      });

      // walk
      walkButton.addEventListener("click", () => {
        pet.walk();
        checkUp();
      });
    </script>
  </body>
</html>
